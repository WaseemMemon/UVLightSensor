metadata:
  name: uvlightsensor
  labels:
    nuclio.io/project-name: 4e941d41-7821-4f47-9b0f-943138bb6569
spec:
  description: ""
  handler: "main:handler"
  runtime: nodejs
  resources: {}
  image: "nuclio/processor-uvlightsensor:latest"
  minReplicas: 1
  maxReplicas: 1
  targetCPU: 75
  triggers:
    myMqttTrigger:
      class: ""
      kind: mqtt
      url: "guest:guest@192.168.43.248:1883"
      attributes:
        subscriptions:
          - qos: 0
            topic: iot/sensor/uvsensor
  version: 1
  build:
    image: ""
    noCache: false
    offline: false
    dependencies: []
    runtimeAttributes:
      repositories: []
    functionSourceCode: CmNvbnN0IGFtcXAgPSByZXF1aXJlKCdhbXFwbGliL2NhbGxiYWNrX2FwaScpOwp2YXIgZnVuY19uYW1lID0gIldhc2VlbSI7CmZ1bmN0aW9uIHNlbmRfZmVlZGJhY2sobXNnKQp7CmFtcXAuY29ubmVjdCgnYW1xcDovLzE5Mi4xNjguNDMuMjQ4JywgKGNvbm5FcnJvciwgY29ubmVjdGlvbikgPT4gewppZiAoY29ubkVycm9yKQp7CnRocm93IGNvbm5FcnJvcjsKfQpjb25uZWN0aW9uLmNyZWF0ZUNoYW5uZWwoKGNoYW5uZWxFcnJvciwgY2hhbm5lbCkgPT4gewppZiAoY2hhbm5lbEVycm9yKSB7CnRocm93IGNoYW5uZWxFcnJvcjsKfQpjb25zdCBRVUVVRSA9ICdVVkxldmVsJwpjaGFubmVsLmFzc2VydFF1ZXVlKFFVRVVFKTsKY2hhbm5lbC5zZW5kVG9RdWV1ZShRVUVVRSwgQnVmZmVyLmZyb20obXNnKSk7CmNvbnNvbGUubG9nKGBNZXNzYWdlIHNlbmQgJHtRVUVVRX1gKTsKfSkKfSl9CgpmdW5jdGlvbiBiaW4yc3RyaW5nKGFycmF5KXsKdmFyIHJlc3VsdCA9ICIiOwpmb3IodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpCnsKcmVzdWx0Kz0gKFN0cmluZy5mcm9tQ2hhckNvZGUoYXJyYXlbaV0pKTsKfQpyZXR1cm4gcmVzdWx0Owp9CmV4cG9ydHMuaGFuZGxlciA9IGZ1bmN0aW9uKGNvbnRleHQsIGV2ZW50KQoKIHsKICAgIHZhciBiID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShldmVudCkpOwogICAgdmFyIGEgPSBiaW4yc3RyaW5nKGIuYm9keS5kYXRhKTsKICAgIGNvbnRleHQuY2FsbGJhY2soImZlZWRiYWNrICIrYSk7CiAgICBjb25zb2xlLmxvZygiVFJJR0dFUiAiK2EpOwogICAgc2VuZF9mZWVkYmFjaygiVVZMaWdodExldmVsOiAiK2EpOwp9Ow==
    commands:
      - 'npm install amqplib'
    codeEntryType: sourceCode
  platform: {}
  readinessTimeoutSeconds: 60
